import{i as w}from"./apis-9b5d4518.js";import{m as v}from"./modalMixin-ef1f1a56.js";import{_ as h,o as n,c as l,a as e,t as s,l as y,m as k,q as x,r as c,F as _,d as M,e as d,n as $,w as C}from"./index-0bc740d2.js";import{P as L}from"./Pagination-8b967d44.js";import{a as p}from"./order-634627c9.js";import"./modal-72184a1d.js";import"./selector-engine-221b1de6.js";import"./timeFormat-77515bb4.js";const P={data(){return{modal:{},tempOrder:{}}},mixins:[v],props:{innerOrder:{type:Object,default(){return{}}}},watch:{innerOrder(){this.tempOrder=this.innerOrder}}},A={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},B={class:"modal-dialog modal-dialog-centered",role:"document"},E={class:"modal-content border-0 p-0"},N=e("div",{class:"modal-header bg-dark text-white"},[e("h2",{class:"modal-title",id:"exampleModalLabel"},[e("span",null,"訂單詳情")]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),S={class:"modal-body"},V={class:"row"},j={class:"col-12 col-lg-6"},F={class:"mb-3"},q={class:"mb-3"},z=e("h3",{class:"fs-5"},"訂單日期",-1),D={class:"mb-3"},G=e("h3",{class:"fs-5"},"訂單編號",-1),H={class:"pb-3 border-bottom"},I=e("h3",{class:"fs-5"},"付款狀態",-1),J={key:0,class:"text-success fw-bold"},K={key:1,class:"text-danger fw-bold"},Q=e("p",null,null,-1),R={key:0,class:"pt-3 mb-3"},T=e("h3",{class:"fs-5 mb-2"},"客戶資訊",-1),U=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"關閉")],-1);function W(o,r,u,b,t,i){return n(),l("div",A,[e("div",B,[e("div",E,[N,e("div",S,[e("div",V,[e("div",j,[e("div",F,[e("ul",null,[e("li",q,[z,e("p",null,s(t.tempOrder.create_at),1)]),e("li",D,[G,e("p",null,s(t.tempOrder.id),1)]),e("li",H,[I,t.tempOrder.is_paid?(n(),l("span",J,"已付款")):(n(),l("span",K,"未付款")),Q]),t.tempOrder.user?(n(),l("li",R,[T,e("ul",null,[e("li",null,"姓名："+s(t.tempOrder.user.name),1),e("li",null,"電子信箱："+s(t.tempOrder.user.email),1),e("li",null,"地址："+s(t.tempOrder.user.address),1),e("li",null,"聯絡電話："+s(t.tempOrder.user.tel),1)])])):y("",!0)])])])])]),U])])],512)}const X=h(P,[["render",W]]),Y={data(){return{tempOrder:{}}},components:{OrderModal:X,Pagination:L},computed:{...k(p,["orderList","pagination","isLoading"])},methods:{...x(p,["getOrder","getOrderAll"]),delOrder(o){w(o.id).then(r=>{this.getOrder()})},openModal(o){this.tempOrder={...o},this.$refs.orderModal.showModal()}},created(){this.getOrder(),this.getOrderAll()}},Z=e("div",{class:"d-flex justify-content-between align-items-center mb-4"},[e("h1",{class:"fs-3 fw-bold font-sans"},"訂單管理")],-1),ee={class:"table-overflow"},te={class:"table table-hover mt-4 align-middle w-100"},se=e("thead",null,[e("tr",null,[e("th",{width:"30%"},"訂單編號"),e("th",{width:"20%"},"付款日期"),e("th",{width:"10%"},"付款狀態"),e("th",{width:"20%"},"客戶姓名"),e("th",{width:"10%"},"合計"),e("th",{width:"10%"},"編輯")])],-1),oe={class:"text-right"},ne={key:0,class:"badge text-white bg-success fs-7 fw-normal"},le={key:1,class:"badge text-white bg-gray fs-7 fw-normal"},ae=["onClick"],de=["onClick"];function re(o,r,u,b,t,i){const m=c("font-awesome-icon"),f=c("OrderModal"),g=c("Pagination");return n(),l(_,null,[Z,e("div",{class:$([{isLoading:o.isLoading},"px-4 py-2 bg-white rounded-3"])},[e("div",ee,[e("table",te,[se,e("tbody",null,[(n(!0),l(_,null,M(o.orderList,a=>(n(),l("tr",null,[e("td",null,s(a.id),1),e("td",oe,s(a.create_at),1),e("td",null,[a.is_paid?(n(),l("span",ne,"已付款")):(n(),l("span",le,"未付款"))]),e("td",null,s(a.user.name),1),e("td",null,s(a.total),1),e("td",null,[e("div",null,[e("button",{class:"btn btn-dark btn-sm me-1",onClick:O=>i.openModal(a)},[d(m,{icon:["far","file-lines"]})],8,ae),e("button",{class:"btn btn-danger btn-sm",onClick:C(O=>i.delOrder(a),["prevent"])},[d(m,{icon:["fas","trash-can"]})],8,de)])])]))),256))]),d(f,{ref:"orderModal","inner-order":t.tempOrder},null,8,["inner-order"])])]),d(g,{"inner-pagination":o.pagination,onEmitPage:o.getOrder,class:"py-5"},null,8,["inner-pagination","onEmitPage"])],2)],64)}const fe=h(Y,[["render",re]]);export{fe as default};
