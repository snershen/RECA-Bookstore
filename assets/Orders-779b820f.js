import{i as w}from"./apis-981045b7.js";import{m as v}from"./modalMixin-e43cf385.js";import{_ as p,o as t,c as s,a as e,t as d,q as y,s as k,u as $,r as c,F as _,e as x,f as a,n as M,w as C}from"./index-c2379942.js";import{P as L}from"./Pagination-46d3ed3e.js";import{a as h}from"./order-f5e86588.js";import"./modal-d09db421.js";import"./selector-engine-2f8e9a5d.js";import"./scrollbar-24367d5f.js";import"./timeFormat-77515bb4.js";import"./sweetalert2.all-03d2c133.js";const P={data(){return{modal:{},tempOrder:{}}},mixins:[v],props:{innerOrder:{type:Object,default(){return{}}}},watch:{innerOrder(){this.tempOrder=this.innerOrder}}},N={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},A={class:"modal-dialog modal-dialog-centered",role:"document"},B={class:"modal-content border-0 p-0"},E=e("div",{class:"modal-header bg-dark text-white"},[e("h2",{class:"modal-title",id:"exampleModalLabel"},[e("span",null,"訂單詳情")]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),S={class:"modal-body"},V={class:"row"},j={class:"col-12 col-lg-6"},F={class:"mb-3"},I={class:"mb-3"},R=e("h3",{class:"fs-5"},"訂單日期",-1),q={class:"mb-3"},z=e("h3",{class:"fs-5"},"訂單編號",-1),D={class:"pb-3 border-bottom"},G=e("h3",{class:"fs-5"},"付款狀態",-1),H={key:0,class:"text-success fw-bold"},J={key:1,class:"text-danger fw-bold"},K=e("p",null,null,-1),Q={key:0,class:"pt-3 mb-3"},T=e("h3",{class:"fs-5 mb-2"},"客戶資訊",-1),U=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"關閉")],-1);function W(o,r,u,b,n,i){return t(),s("div",N,[e("div",A,[e("div",B,[E,e("div",S,[e("div",V,[e("div",j,[e("div",F,[e("ul",null,[e("li",I,[R,e("p",null,d(n.tempOrder.create_at),1)]),e("li",q,[z,e("p",null,d(n.tempOrder.id),1)]),e("li",D,[G,n.tempOrder.is_paid?(t(),s("span",H,"已付款")):(t(),s("span",J,"未付款")),K]),n.tempOrder.user?(t(),s("li",Q,[T,e("ul",null,[e("li",null,"姓名："+d(n.tempOrder.user.name),1),e("li",null,"電子信箱："+d(n.tempOrder.user.email),1),e("li",null,"地址："+d(n.tempOrder.user.address),1),e("li",null,"聯絡電話："+d(n.tempOrder.user.tel),1)])])):y("",!0)])])])])]),U])])],512)}const X=p(P,[["render",W]]),Y={data(){return{tempOrder:{}}},components:{OrderModal:X,Pagination:L},computed:{...k(h,["orderList","pagination","isLoading"])},methods:{...$(h,["getOrder","getOrderAll","sendRankInfo","calcOrderNum"]),delOrder(o){w(o.id).then(()=>{this.getOrder()}).catch(r=>{console.error(r)})},openModal(o){this.tempOrder={...o},this.$refs.orderModal.showModal()}},created(){this.getOrder(),this.getOrderAll(),this.calcOrderNum()},mounted(){this.sendRankInfo()}},Z=e("div",{class:"d-flex justify-content-between align-items-center mb-4"},[e("h1",{class:"fs-3 fw-bold font-sans"},"訂單管理")],-1),ee={class:"table-overflow"},te={class:"table table-hover mt-4 align-middle w-100"},se=e("thead",null,[e("tr",null,[e("th",{width:"30%"},"訂單編號"),e("th",{width:"20%"},"付款日期"),e("th",{width:"10%"},"付款狀態"),e("th",{width:"20%"},"客戶姓名"),e("th",{width:"10%"},"合計"),e("th",{width:"10%"},"編輯")])],-1),oe={key:0},ne=e("tr",null,[e("td",{colspan:"6",class:"text-center"},"目前無訂單")],-1),de=[ne],le={key:1},re={class:"text-right"},ae={key:0,class:"badge text-white bg-success fs-7 fw-normal"},ie={key:1,class:"badge text-white bg-gray fs-7 fw-normal"},ce=["onClick"],me=["onClick"];function _e(o,r,u,b,n,i){const m=c("font-awesome-icon"),f=c("OrderModal"),g=c("Pagination");return t(),s(_,null,[Z,e("div",{class:M([{isLoading:o.isLoading},"px-4 py-2 bg-white rounded-3"])},[e("div",ee,[e("table",te,[se,o.orderList.length===0?(t(),s("tbody",oe,de)):(t(),s("tbody",le,[(t(!0),s(_,null,x(o.orderList,l=>(t(),s("tr",null,[e("td",null,d(l.id),1),e("td",re,d(l.create_at),1),e("td",null,[l.is_paid?(t(),s("span",ae,"已付款")):(t(),s("span",ie,"未付款"))]),e("td",null,d(l.user.name),1),e("td",null,d(l.total),1),e("td",null,[e("div",null,[e("button",{class:"btn btn-dark btn-sm me-1",onClick:O=>i.openModal(l)},[a(m,{icon:["far","file-lines"]})],8,ce),e("button",{class:"btn btn-danger btn-sm",onClick:C(O=>i.delOrder(l),["prevent"])},[a(m,{icon:["fas","trash-can"]})],8,me)])])]))),256))])),a(f,{ref:"orderModal","inner-order":n.tempOrder},null,8,["inner-order"])])]),a(g,{"inner-pagination":o.pagination,onEmitPage:o.getOrder,class:"py-5"},null,8,["inner-pagination","onEmitPage"])],2)],64)}const ke=p(Y,[["render",_e]]);export{ke as default};
