import{v as L}from"./apis-03452721.js";import{_ as V,u as j,x as S,r as y,o as c,c as n,a as t,w as h,l as v,F as T,e as N,i as a,b,s as C,f as i,t as d,v as w,h as m,n as B,q as x,p as M,j as A}from"./index-31ad7194.js";import{c as k}from"./cart-de66b42c.js";import{t as U}from"./toastMixin-5c5e123e.js";import{a as q}from"./alertMixin-bc4527b4.js";const I="/RECA-Bookstore/assets/cart-empty-2878a2a2.png";const $={data(){return{couponCode:"",hasCoupon:!1,couponText:"new_member",isCopied:!1}},mixins:[U,q],computed:{...j(k,["cartList","saveMoney","cartLength","isClicked"])},methods:{...S(k,["getCart","deleteCart","editCart","changeCartNum","deleteAllCart"]),checkCoupon(){this.hasCoupon=!1;const e={data:{code:this.couponCode}};L(e).then(o=>{o.data.success&&(this.hasCoupon=!0,this.getCart());const f=o.data.message;this.showToast({title:f,icon:"success"})}).catch(o=>{this.showToast({title:o.response.data.message,icon:"error"}),console.error(o)})},copyCoupon(){navigator.clipboard.writeText(this.couponText).then(()=>{console.log("Text copied to clipboard"),this.isCopied=!0}).catch(e=>{console.error("Unable to copy text to clipboard: ",e)})}},created(){this.getCart()}},l=e=>(M("data-v-1cb69e6e"),e=e(),A(),e),R={class:"container py-5"},D={class:"d-flex justify-content-between align-items-center mb-4"},E=l(()=>t("h1",{class:"fw-bold"},"購物車",-1)),F={key:0,class:"text-lg-center px-0 list-unstyled"},z=B('<li class="row d-flex d-lg-none justify-content-center" data-v-1cb69e6e><div class="bg-light text-center py-2 ps-2 fs-7" data-v-1cb69e6e>品項</div></li><li class="row bg-light py-2 d-none d-lg-flex" data-v-1cb69e6e><div class="col-1" data-v-1cb69e6e></div><ul class="row list-unstyled col-11" data-v-1cb69e6e><li class="col-5" data-v-1cb69e6e>商品名稱</li><li class="col-2" data-v-1cb69e6e>價格</li><li class="col-2" data-v-1cb69e6e>數量</li><li class="col-2" data-v-1cb69e6e>小計</li><li class="col-1" data-v-1cb69e6e></li></ul></li>',2),G={class:"col-lg-1 col-3"},H=["src"],J={class:"row list-unstyled col-lg-11 col-9 align-items-center"},K={class:"col-lg-5 col-12 text-lg-start"},O={class:"col-lg-2 col-6"},P={class:"text-decoration-line-through text-gray"},Q={class:"col-lg-2 col-6 ms-auto text-end text-lg-center"},W={class:"d-flex align-items-center justify-content-center"},X=["onClick"],Y=["onUpdate:modelValue","onBlur"],Z=["onClick"],tt={class:"col-lg-2 col-6"},et=l(()=>t("span",{class:"d-lg-none d-inline-block"},"小計",-1)),st={class:"col-lg-1 col-6 ms-auto text-end"},ot=["onClick"],lt={class:"border-bottom py-2 text-primary"},ct={class:"text-nowrap w-100 d-flex align-items-center"},nt=l(()=>t("input",{type:"text",value:"new_member",class:"rounded-0 border-0 text-primary bg-white opacity-100",style:{width:"120px"},disabled:""},null,-1)),at={class:"row bg-light py-4 mb-4 px-4 fs-6 fw-bold"},it=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-6 text-start"},"總計",-1)),dt={class:"col-lg-3 text-end col-6"},rt={class:"row mb-4 px-4 fs-6 fw-bold align-items-center"},pt=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-12 text-start mb-2 mb-lg-0"},"優惠券",-1)),ut={class:"col-lg-3 col-12 d-flex align-items-center justify-content-end mb-2"},_t=["disabled"],ht={key:0,class:"text-end text-success fw-normal"},bt={class:"row mb-4 pb-4 px-4 fs-6 fw-bold border-bottom"},gt=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-6 text-start"},"折扣",-1)),mt={class:"col-lg-3 text-end col-6"},ft={class:"row mb-4 pb-4 px-4 fs-6 fw-bold"},yt=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-6 text-start"},"總計",-1)),vt={class:"col-lg-3 text-end col-6 fs-5"},Ct={key:1,class:"text-center fw-bold"},wt=l(()=>t("p",{class:"mb-5 fs-lg-3 fs-4"},[a("購物車目前沒有商品"),t("br"),a("為自己創造閱讀時光吧")],-1)),xt=l(()=>t("div",{class:"text-center px-5"},[t("img",{src:I,alt:"",class:"img-fluid"})],-1)),kt=[wt,xt],Lt={key:2,class:"row justify-content-between py-5"},Vt={class:"col-lg-4 col-12"},jt={class:"col-lg-4 col-12"},St={key:3,class:"row justify-content-between py-5"},Tt={class:"col-lg-4 col-12 mx-auto"},Nt=l(()=>t("span",{class:"me-2"},null,-1));function Bt(e,o,f,Mt,r,_){const p=y("font-awesome-icon"),g=y("RouterLink");return c(),n("div",R,[t("div",D,[E,e.cartLength!==0?(c(),n("a",{key:0,href:"#",class:"btn btn-outline-secondary",onClick:o[0]||(o[0]=h((...s)=>e.deleteAllCart&&e.deleteAllCart(...s),["prevent"]))},"清空購物車")):v("",!0)]),e.cartLength!==0?(c(),n("ul",F,[z,(c(!0),n(T,null,N(e.cartList.carts,s=>(c(),n("li",{class:"row border-bottom py-3",key:s.id},[t("div",G,[t("img",{src:s.product.imageUrl,alt:"",class:"img-fluid"},null,8,H)]),t("ul",J,[t("li",K,d(s.product.title),1),t("li",O,[a(" $"+d(s.product.price)+" ",1),t("span",P," $"+d(s.product.origin_price),1)]),t("li",Q,[t("div",W,[t("button",{onClick:u=>e.editCart(s,!1),class:x(["btn pe-3 py-3 border-0",{"disabled opacity-25":s.qty<=1||e.isClicked}])},[i(p,{icon:["fas","minus"]})],10,X),b(t("input",{class:"form-control text-center",type:"number",min:"1","onUpdate:modelValue":u=>s.qty=u,onBlur:h(u=>e.changeCartNum(s),["prevent"]),style:{width:"70px"}},null,40,Y),[[w,s.qty]]),t("button",{onClick:u=>e.editCart(s,!0),class:x(["btn ps-3 py-3 border-0",{"disabled opacity-25":e.isClicked}])},[i(p,{icon:["fas","plus"]})],10,Z)])]),t("li",tt,[et,a(" $"+d(s.total),1)]),t("li",st,[t("a",{href:"#",class:"btn btn-outline-gray text-nowrap",onClick:h(u=>e.deleteCart(s.id),["prevent"])},[i(p,{icon:["fas","xmark"],class:"me-2"}),a("移除")],8,ot)])])]))),128)),t("li",lt,[t("p",ct,[a(" 神秘購物金來囉！ "),nt,t("button",{type:"button",class:"btn border-white rounded-2 fs-7 d-flex align-items-center justify-content-center",onClick:o[1]||(o[1]=(...s)=>_.copyCoupon&&_.copyCoupon(...s))},[b(t("span",null,[i(p,{icon:["far","copy"]})],512),[[C,!r.isCopied]]),b(t("span",null,[i(p,{icon:["fas","check"]})],512),[[C,r.isCopied]])])])]),t("li",null,[t("div",at,[it,t("div",dt,"$"+d(e.cartList.total),1)]),t("div",rt,[pt,t("div",ut,[b(t("input",{type:"text",placeholder:"填入優惠券",class:"form-control px-2 me-2","onUpdate:modelValue":o[2]||(o[2]=s=>r.couponCode=s)},null,512),[[w,r.couponCode]]),t("button",{type:"button",class:"btn btn-secondary text-nowrap",onClick:o[3]||(o[3]=h((...s)=>_.checkCoupon&&_.checkCoupon(...s),["prevent"])),disabled:r.couponCode.length===0}," 套用 ",8,_t)]),this.hasCoupon?(c(),n("p",ht," 已套用優惠券："+d(this.couponCode),1)):v("",!0)]),t("div",bt,[gt,t("div",mt,"- "+d(e.saveMoney),1)]),t("div",ft,[yt,t("div",vt,"$"+d(e.cartList.final_total),1)])])])):(c(),n("div",Ct,kt)),e.cartLength?(c(),n("div",Lt,[t("div",Vt,[i(g,{to:{name:"products"},class:"btn btn-outline-secondary rounded-0 w-100 py-3 mb-3 mb-lg-0"},{default:m(()=>[a("繼續逛逛")]),_:1})]),t("div",jt,[i(g,{to:{name:"pay"},class:"btn btn-secondary rounded-0 w-100 py-3"},{default:m(()=>[a(" 前往結帳")]),_:1})])])):(c(),n("div",St,[t("div",Tt,[i(g,{to:{name:"products"},class:"btn btn-secondary rounded-0 w-100 py-3 mb-3 mb-lg-0"},{default:m(()=>[Nt,a("繼續逛逛 ")]),_:1})])]))])}const Rt=V($,[["render",Bt],["__scopeId","data-v-1cb69e6e"]]);export{Rt as default};
