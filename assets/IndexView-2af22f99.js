import{u as S,x as C,_ as T,o as r,c as a,a as t,F as _,e as u,q as M,t as n,T as z,r as d,f as o,h as i,k as c,i as k,p as F,j as I}from"./index-31ad7194.js";import{u as w}from"./product-e3985eb0.js";import{a as $}from"./article-b4aa31c6.js";import{a as N}from"./order-eb3eba31.js";import{u as R}from"./apis-03452721.js";import{P as U}from"./ProductCard-adda90f1.js";import{A as O}from"./ArticleCard-b5e2c3da.js";import{L as D}from"./LoadingComponent-63632f5f.js";import{B as E}from"./BtnMore-ba29084d.js";import{S as q}from"./swiper-vue-ff0212e0.js";import"./toastMixin-5c5e123e.js";import"./timeFormat-77515bb4.js";import"./order-d377b95d.js";import"./cart-de66b42c.js";import"./alertMixin-bc4527b4.js";const G={computed:{...S(w,["productList","categoryList","selectedCategory"])},methods:{...C(w,["getProducts","filterProduct","getProductAll","sortProduct","sortTimeLower"]),directProductPage(){this.$router.push("/products"),this.searchString=""},async handleFilter(s){await this.filterProduct(s),await this.sortTimeLower()}},async created(){await this.getProducts(),await this.filterProduct(this.categoryList[0]),await this.sortTimeLower()}},J={class:"nav-wrapper"},Q={class:"nav nav-pills mb-3 flex-nowrap text-nowrap overflow-x-scroll",id:"pills-tab",role:"tablist"},K=["onClick"];function W(s,p,b,L,y,v){return r(),a("div",J,[t("ul",Q,[(r(!0),a(_,null,u(s.categoryList,x=>(r(),a("li",{class:"nav-item",role:"presentation",key:x},[t("button",{class:M(["nav-link",{active:s.selectedCategory===x}]),id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true",onClick:h=>v.handleFilter(x)},n(x),11,K)]))),128))])])}const X=T(G,[["render",W],["__scopeId","data-v-dbda6ac0"]]);const Y={data(){return{rankList:[],indexLoading:!1,bannerSwiper:{spaceBetween:60,centeredSlides:!0,breakpoints:{576:{slidesPerView:1},768:{slidesPerView:3},1024:{slidesPerView:5}}},todaySwiper:{slidesPerView:1,spaceBetween:20,navigation:!0,loop:!0,breakpoints:{576:{slidesPerView:1},1024:{slidesPerView:6},1300:{slidesPerView:6}}},publishSwiper:{slidesPerView:1,spaceBetween:18,scrollbar:!0,navigation:!0,loop:!1,breakpoints:{576:{slidesPerView:1},768:{slidesPerView:3},1024:{slidesPerView:4},1400:{slidesPerView:6}}},rankSwiper:{slidesPerView:1,direction:"vertical",watchSlidesProgress:!0,autoScrollOffset:1,observer:!0,observeParents:!0,breakpoints:{576:{slidesPerView:1},1024:{slidesPerView:5}}},rankContentSwiper:{modules:[z],observer:!0,observeParents:!0,slidesPerView:1}}},components:{ProductCard:U,ArticleCard:O,TabsComponent:X,BtnMore:E,LoadingComponent:D,SwiperSlide:q},computed:{filterToday(){return w().productAll.sort((s,p)=>{if(s.time&&p.time)return p.time.localeCompare(s.time)})},filterFeature(){return w().productAll.filter(s=>s.is_feature)},...S(w,["productList","categoryList","filterResult","isLoading"]),...S($,["articleList"]),...S(N,["sortSoldNum"])},methods:{...C($,["getArticles"]),initializeSwiper(s,p){const b=s,L={observer:!0,observeParents:!0,loop:!0,autoplay:!0,injectStylesUrls:["./custom_swiper.css"],...p};Object.assign(b,L),b.initialize()},async getRankArticle(){try{const p=(await R("-NrQ8wc--1weD4FTHjHH")).data.article.content,b=JSON.parse(p);this.rankList=b}catch(s){console.error(s),this.rankList=this.productList}}},async mounted(){this.indexLoading=!0;try{await Promise.all([w().getProducts(),this.getArticles(),w().getProductAll(),this.getRankArticle()])}catch(s){console.error("An error occurred during Promise.all:",s)}this.indexLoading=!0,this.initializeSwiper(this.$refs.bannerSwiper,this.bannerSwiper),this.initializeSwiper(this.$refs.todaySwiper,this.todaySwiper),this.initializeSwiper(this.$refs.publishSwiper,this.publishSwiper),this.initializeSwiper(this.$refs.rankSwiper,this.rankSwiper),this.initializeSwiper(this.$refs.rankContentSwiper,this.rankContentSwiper),this.indexLoading=!1}},g=s=>(F("data-v-b838edd8"),s=s(),I(),s),Z={class:"banner py-6 vh-100"},tt=g(()=>t("h1",{class:"banner-title text-center fw-bold pt-lg-4"},[k(" 踏上探索之旅"),t("br"),k("尋找屬於自己的命定之書 ")],-1)),et=g(()=>t("p",{class:"banner-subtitle text-center mt-2 fs-4 text-white"},"上萬本書籍等待你的閱讀",-1)),st={class:"container"},rt=["src","alt"],ot={class:"container py-6"},it={class:"d-flex justify-content-between align-items-center"},nt=g(()=>t("h2",{class:"fw-bold fs-2"},"今日熱門",-1)),at={class:"position-relative"},lt={class:"today-card"},ct={class:"today-card-img mb-3"},dt=["src","alt"],_t={class:"flex-grow-1 w-100"},ut=["innerHTML"],pt={class:"text-gray text-overflow-1 text-center text-lg-start"},ht={class:"today-card-price align-items-center align-items-lg-start justify-content-center justify-content-lg-start flex-lg-column"},ft={class:"d-flex align-items-center"},mt={class:"fw-bold me-2 fs-3"},wt={class:"fs-7 text-gray"},gt=["innerHTML"],bt={class:"bg-primary-light py-6"},yt={class:"container"},xt={class:"d-flex justify-content-between align-items-center mb-4"},kt=g(()=>t("h2",{class:"fw-bold fs-2"},"最新出版",-1)),vt={class:"position-relative"},St={class:"container py-6"},Lt=g(()=>t("h2",{class:"fw-bold fs-2 mb-5"},"暢銷排行",-1)),Pt={class:"row"},$t={class:"col-lg-3"},Ct={class:"border-bottom py-2 text-truncate"},Tt={class:"me-2 rank-number"},Vt={class:"border-bottom py-2 text-truncate"},jt={class:"me-2 rank-number"},At={class:"col-lg-9 rank-outer"},Bt={class:"rank-card d-flex flex-column flex-md-row position-relative text-center text-lg-start"},Ht={class:"rank-card-img mb-3 mb-lg-0"},Mt=["src","alt"],zt={class:"flex-grow-1 w-100"},Ft={class:"fs-4 fs-lg-3 rank-card-title fw-bold text-overflow-2 flex-grow-1 text-center text-md-start"},It={class:"rank-card-price align-items-center align-items-md-start justify-content-center justify-content-lg-start flex-column mb-3"},Nt={class:"text-gray mb-1"},Rt={class:"d-flex align-items-center"},Ut={class:"fw-bold me-2 fs-3"},Ot={class:"fs-7 text-gray"},Dt=["innerHTML"],Et={class:"rank-card d-flex flex-column flex-md-row position-relative text-center text-lg-start"},qt={class:"rank-card-img mb-3 mb-lg-0"},Gt=["src","alt"],Jt={class:"flex-grow-1 w-100"},Qt={class:"fs-4 fs-lg-3 rank-card-title fw-bold text-overflow-2 flex-grow-1 text-center text-md-start"},Kt={class:"rank-card-price align-items-center align-items-md-start justify-content-center justify-content-lg-start flex-column mb-3"},Wt={class:"text-gray mb-1"},Xt={class:"d-flex align-items-center"},Yt={class:"fw-bold me-2 fs-3"},Zt={class:"fs-7 text-gray"},te=["innerHTML"],ee={class:"bg-primary-light py-5"},se={class:"container py-5"},re={class:"d-flex justify-content-between align-items-center mb-4"},oe=g(()=>t("h2",{class:"fw-bold fs-2"},"編輯推薦",-1)),ie={class:"row"},ne={class:"bookstore-bg text-center"},ae=g(()=>t("h3",{class:"fs-lg-1 fs-2 fw-bold text-primary mb-3"},"開啟屬於你的閱讀旅程",-1));function le(s,p,b,L,y,v){const x=d("LoadingComponent"),h=d("RouterLink"),f=d("swiper-slide"),m=d("swiper-container"),P=d("BtnMore"),V=d("TabsComponent"),j=d("ProductCard"),A=d("ArticleCard"),B=d("font-awesome-icon"),H=d("router-link");return r(),a(_,null,[o(x,{isLoading:y.indexLoading},null,8,["isLoading"]),t("main",null,[t("section",Z,[tt,et,t("div",st,[o(m,{init:"false",ref:"bannerSwiper",class:"container banner-swiper pt-5"},{default:i(()=>[(r(!0),a(_,null,u(v.filterFeature,e=>(r(),c(f,{key:`banner${e.id}`,class:"h-auto d-flex justify-content-center",lazy:"true"},{default:i(()=>[o(h,{to:`/products/${e.id}`},{default:i(()=>[t("img",{src:e.imageUrl,alt:e.title,class:"w-100 h-100 object-fit-contain",loading:"lazy"},null,8,rt)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},512)])]),t("section",ot,[t("div",it,[nt,o(h,{to:{name:"products"}},{default:i(()=>[o(P)]),_:1})]),t("div",at,[o(m,{init:"false",ref:"todaySwiper",class:"container swiper-today my-5"},{default:i(()=>[(r(!0),a(_,null,u(v.filterToday,e=>(r(),c(f,{key:`today${e.id}`,class:"h-auto"},{default:i(()=>[t("div",lt,[t("div",ct,[t("img",{src:e.imageUrl,alt:e.title,class:"w-100 h-100 object-fit-contain"},null,8,dt)]),t("div",_t,[t("h4",{class:"today-card-title fw-bold text-overflow-2 flex-grow-1 mb-1 text-center text-lg-start",innerHTML:e.title},null,8,ut),t("p",pt,n(e.author),1),t("div",ht,[t("div",ft,[t("p",mt,"$"+n(e.price),1),t("del",wt," $"+n(e.origin_price),1)])]),t("p",{class:"today-card-content text-overflow-4 text-center text-lg-start",innerHTML:e.content},null,8,gt),o(h,{to:`/products/${e.id}`,class:"stretched-link"},null,8,["to"])])])]),_:2},1024))),128))]),_:1},512)])]),t("section",bt,[t("div",yt,[t("div",xt,[kt,o(h,{to:{name:"products"}},{default:i(()=>[o(P)]),_:1})]),o(V),t("div",vt,[o(m,{init:"false",ref:"publishSwiper",class:"container px-5"},{default:i(()=>[(r(!0),a(_,null,u(s.filterResult,e=>(r(),c(f,{key:`publish${e.id}`,class:"h-auto d-flex justify-content-center my-5"},{default:i(()=>[o(j,{item:e},null,8,["item"])]),_:2},1024))),128))]),_:1},512)])])]),t("section",St,[Lt,t("div",Pt,[t("div",$t,[y.rankList.length>9?(r(),c(m,{key:0,class:"container rank-swiper",init:"false",ref:"rankSwiper","thumbs-swiper":"#rank-thumbs"},{default:i(()=>[(r(!0),a(_,null,u(y.rankList,(e,l)=>(r(),c(f,{key:`publish${l}`,"data-index":l+1},{default:i(()=>[t("div",Ct,[t("span",Tt,n(l+1),1),k(" "+n(e.product.title),1)])]),_:2},1032,["data-index"]))),128))]),_:1},512)):(r(),c(m,{key:1,class:"container rank-swiper",init:"false",ref:"rankSwiper","thumbs-swiper":"#rank-thumbs"},{default:i(()=>[(r(!0),a(_,null,u(s.productList,(e,l)=>(r(),c(f,{key:`publish${l}`,"data-index":l+1},{default:i(()=>[t("div",Vt,[t("span",jt,n(l+1),1),k(" "+n(e.title),1)])]),_:2},1032,["data-index"]))),128))]),_:1},512))]),t("div",At,[y.rankList.length>9?(r(),c(m,{key:0,init:"false",ref:"rankContentSwiper",class:"container rank-content-swiper",id:"rank-thumbs"},{default:i(()=>[(r(!0),a(_,null,u(y.rankList,(e,l)=>(r(),c(f,{key:`rand${l}`},{default:i(()=>[t("div",Bt,[t("div",Ht,[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-100 object-fit-contain"},null,8,Mt)]),t("div",zt,[t("h4",Ft,n(e.product.title),1),t("div",It,[t("p",Nt,n(e.product.author),1),t("div",Rt,[t("p",Ut,"$"+n(e.product.price),1),t("del",Ot," $"+n(e.product.origin_price),1)])]),t("p",{class:"today-card-content text-overflow-4 text-center text-md-start",innerHTML:e.product.content},null,8,Dt),o(h,{to:`/products/${e.product.id}`,class:"stretched-link"},null,8,["to"])])])]),_:2},1024))),128))]),_:1},512)):(r(),c(m,{key:1,init:"false",ref:"rankContentSwiper",class:"container rank-content-swiper",id:"rank-thumbs"},{default:i(()=>[(r(!0),a(_,null,u(s.productList,(e,l)=>(r(),c(f,{key:`rank${l}`},{default:i(()=>[t("div",Et,[t("div",qt,[t("img",{src:e.imageUrl,alt:e.title,class:"w-100 object-fit-contain"},null,8,Gt)]),t("div",Jt,[t("h4",Qt,n(e.title),1),t("div",Kt,[t("p",Wt,n(e.author),1),t("div",Xt,[t("p",Yt,"$"+n(e.price),1),t("del",Zt," $"+n(e.origin_price),1)])]),t("p",{class:"today-card-content text-overflow-4 text-center text-md-start",innerHTML:e.content},null,8,te),o(h,{to:`/products/${e.id}`,class:"stretched-link"},null,8,["to"])])])]),_:2},1024))),128))]),_:1},512))])])]),t("section",ee,[t("div",se,[t("div",re,[oe,o(h,{to:{name:"articles"}},{default:i(()=>[o(P)]),_:1})]),t("ul",ie,[(r(!0),a(_,null,u(s.articleList,e=>(r(),a("li",{class:"col-md-4",key:e.id},[o(A,{article:e},null,8,["article"])]))),128))])])]),t("section",ne,[ae,o(H,{to:{name:"products"},class:"btn btn-outline-light rounded-pill fs-6 px-4 py-2"},{default:i(()=>[k(" 探索書店 "),o(B,{icon:["fas","chevron-right"],class:"ms-2 fa-sm"})]),_:1})])])],64)}const Se=T(Y,[["render",le],["__scopeId","data-v-b838edd8"]]);export{Se as default};
