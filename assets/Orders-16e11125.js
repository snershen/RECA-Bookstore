import{i as k,j as y}from"./apis-75edfbd9.js";import{m as M}from"./modalMixin-dbb0e79f.js";import{_ as u,o,c as a,a as t,t as n,k as b,r as i,F as p,d as x,e as c,l as L,n as P,w as C}from"./index-e3e4c989.js";import{P as $}from"./Pagination-70611799.js";import{t as h}from"./timeFormat-77515bb4.js";import"./modal-8c1c62b8.js";import"./selector-engine-e34fc7a1.js";const B={data(){return{modal:{},tempOrder:{}}},mixins:[M],props:{innerOrder:{type:Object,default(){return{}}}},watch:{innerOrder(){this.tempOrder=this.innerOrder}}},E={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},j={class:"modal-dialog modal-dialog-centered",role:"document"},F={class:"modal-content border-0 p-0"},N=t("div",{class:"modal-header bg-dark text-white"},[t("h2",{class:"modal-title",id:"exampleModalLabel"},[t("span",null,"訂單詳情")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),V={class:"modal-body"},U={class:"row"},z={class:"col-12 col-lg-6"},A={class:"mb-3"},D={class:"mb-3"},G=t("h3",{class:"fs-5"},"訂單日期",-1),S={class:"mb-3"},q=t("h3",{class:"fs-5"},"訂單編號",-1),H={class:"pb-3 border-bottom"},I=t("h3",{class:"fs-5"},"付款狀態",-1),J={key:0,class:"text-success fw-bold"},K={key:1,class:"text-danger fw-bold"},Q=t("p",null,null,-1),R={key:0,class:"pt-3 mb-3"},T=t("h3",{class:"fs-5 mb-2"},"客戶資訊",-1),W=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"關閉")],-1);function X(s,r,l,f,e,m){return o(),a("div",E,[t("div",j,[t("div",F,[N,t("div",V,[t("div",U,[t("div",z,[t("div",A,[t("ul",null,[t("li",D,[G,t("p",null,n(e.tempOrder.create_at),1)]),t("li",S,[q,t("p",null,n(e.tempOrder.id),1)]),t("li",H,[I,e.tempOrder.is_paid?(o(),a("span",J,"已付款")):(o(),a("span",K,"未付款")),Q]),e.tempOrder.user?(o(),a("li",R,[T,t("ul",null,[t("li",null,"姓名："+n(e.tempOrder.user.name),1),t("li",null,"電子信箱："+n(e.tempOrder.user.email),1),t("li",null,"地址："+n(e.tempOrder.user.address),1),t("li",null,"聯絡電話："+n(e.tempOrder.user.tel),1)])])):b("",!0)])])])])]),W])])],512)}const Y=u(B,[["render",X]]),Z={data(){return{orderList:[],pagination:{},tempOrder:{},isLoading:!1}},components:{OrderModal:Y,Pagination:$},methods:{getOrder(s=1){this.isLoading=!0,k(s).then(r=>{this.orderList=r.data.orders,this.pagination=r.data.pagination,h(this.orderList),this.isLoading=!1,this.orderList.forEach(l=>{l.total=Math.round(l.total),h(l,"create_at")})})},delOrder(s){y(s.id).then(r=>{this.getOrderAll()})},openModal(s){this.tempOrder={...s},this.$refs.orderModal.showModal()}},created(){this.getOrder()}},tt=t("div",{class:"d-flex justify-content-between align-items-center mb-4"},[t("h1",{class:"fs-3 fw-bold font-sans"},"訂單管理")],-1),et={class:"table-overflow"},st={class:"table table-hover mt-4 align-middle w-100"},ot=t("thead",null,[t("tr",null,[t("th",{width:"30%"},"訂單編號"),t("th",{width:"20%"},"付款日期"),t("th",{width:"10%"},"付款狀態"),t("th",{width:"20%"},"客戶姓名"),t("th",{width:"10%"},"合計"),t("th",{width:"10%"},"編輯")])],-1),nt={class:"text-right"},at={key:0,class:"badge text-white bg-success fs-7 fw-normal"},dt={key:1,class:"badge text-white bg-gray fs-7 fw-normal"},rt=["onClick"],lt=["onClick"];function it(s,r,l,f,e,m){const _=i("font-awesome-icon"),g=i("OrderModal"),O=i("Pagination"),w=i("ProductModal");return o(),a(p,null,[tt,t("div",{class:P([{isLoading:e.isLoading},"px-4 py-2 bg-white rounded-3"])},[t("div",et,[t("table",st,[ot,t("tbody",null,[(o(!0),a(p,null,x(e.orderList,d=>(o(),a("tr",null,[t("td",null,n(d.id),1),t("td",nt,n(d.create_at),1),t("td",null,[d.is_paid?(o(),a("span",at,"已付款")):(o(),a("span",dt,"未付款"))]),t("td",null,n(d.user.name),1),t("td",null,n(d.total),1),t("td",null,[t("div",null,[t("button",{class:"btn btn-dark btn-sm me-1",onClick:v=>m.openModal(d)},[c(_,{icon:["far","file-lines"]})],8,rt),t("button",{class:"btn btn-danger btn-sm",onClick:C(v=>m.delOrder(d),["prevent"])},[c(_,{icon:["fas","trash-can"]})],8,lt)])])]))),256))]),c(g,{ref:"orderModal","inner-order":e.tempOrder},null,8,["inner-order"])])]),e.pagination.total_pages!==1?(o(),L(O,{key:0,"inner-pagination":e.pagination,onEmitPage:s.getProducts,class:"py-5"},null,8,["inner-pagination","onEmitPage"])):b("",!0),c(w,{ref:"productModal",product:s.tempProduct,onUpdateProduct:s.updateProduct},null,8,["product","onUpdateProduct"])],2)],64)}const ft=u(Z,[["render",it]]);export{ft as default};
