import{z as i}from"./index-0c9b4ac0.js";import{x as o,y as a,z as d}from"./apis-467ff69f.js";import{t as e}from"./timeFormat-77515bb4.js";const c=i("orderStore",{state:()=>({orderList:[],orderResult:[],order:{},searchStr:"",isLoading:!1,isEmptyResult:!1}),actions:{getOrders(){this.isEmptyResult=!1,this.isLoading=!0,o().then(r=>{this.isLoading=!1,this.orderList=r.data.orders,e(this.orderList,"create_at"),this.orderResult=[],this.orderList.forEach(t=>{t.total=Math.round(t.total)})}).catch(r=>{console.error(r)})},async getSingleOrder(r){this.isLoading=!0;try{const t=await a(r);this.order=t.data.order,e(this.order,"create_at"),this.order.total=Math.round(this.order.total),this.order.is_paid&&e(this.order,"paid_date")}catch(t){console.error(t)}finally{this.isLoading=!1}},payMoney(r){d(r).then(()=>{this.getSingleOrder(r)}).catch(t=>{console.error(t)})},filterOrder(r){if(this.searchStr=r.trim(),this.searchStr===""){this.orderResult=this.orderList;return}const t=this.orderList.filter(s=>s.id===this.searchStr);this.orderResult=t,this.orderResult.length===0&&(this.isEmptyResult=!0)}}});export{c as o};
