import{t as x}from"./apis-9024af3e.js";import{t as k}from"./toastMixin-f63d0cd0.js";import{_ as L,s as $,u as V,r as b,o as c,c as n,a as t,w as _,q as v,F as j,e as N,t as a,b as y,v as C,f as i,h,l as S,i as d,n as B,p as A,j as M}from"./index-ad467eb3.js";import{c as w}from"./cart-22013adf.js";import"./sweetalert2.all-dc3da75e.js";const q="/RECA-Bookstore/assets/cart-empty-2878a2a2.png";const I={data(){return{couponCode:"",hasCoupon:!1}},mixins:[k],computed:{...$(w,["cartList","saveMoney","cartLength"])},methods:{...V(w,["getCart","deleteCart","editCart","changeCartNum","deleteAllCart"]),checkCoupon(){this.hasCoupon=!1;const s={data:{code:this.couponCode}};x(s).then(e=>{e.data.success&&(this.hasCoupon=!0,this.getCart());const f=e.data.message;this.showToast({title:f,icon:"info"})}).catch(e=>{console.error(e)})}},created(){this.getCart()}},l=s=>(A("data-v-c5df737e"),s=s(),M(),s),U={class:"container py-5"},R={class:"d-flex justify-content-between align-items-center mb-4"},T=l(()=>t("h1",{class:"fw-bold"},"購物車",-1)),D={key:0,class:"text-lg-center px-0 list-unstyled"},E=S('<li class="row d-flex d-lg-none justify-content-center" data-v-c5df737e><div class="bg-light text-center py-2 ps-2 fs-7" data-v-c5df737e>品項</div></li><li class="row bg-light py-2 d-none d-lg-flex" data-v-c5df737e><div class="col-1" data-v-c5df737e></div><ul class="row list-unstyled col-11" data-v-c5df737e><li class="col-5" data-v-c5df737e>商品名稱</li><li class="col-2" data-v-c5df737e>價格</li><li class="col-2" data-v-c5df737e>數量</li><li class="col-2" data-v-c5df737e>小計</li><li class="col-1" data-v-c5df737e></li></ul></li>',2),F={class:"row border-bottom py-3"},z={class:"col-lg-1 col-3"},G=["src"],H={class:"row list-unstyled col-lg-11 col-9 align-items-center"},J={class:"col-lg-5 col-12 text-lg-start"},K={class:"col-lg-2 col-6"},O={class:"text-decoration-line-through text-gray"},P={class:"col-lg-2 col-6 ms-auto text-end text-lg-center"},Q={class:"d-flex align-items-center justify-content-center"},W=["onClick"],X=["onUpdate:modelValue","onBlur"],Y=["onClick"],Z={class:"col-lg-2 col-6"},tt=l(()=>t("span",{class:"d-lg-none d-inline-block"},"小計",-1)),st={class:"col-lg-1 col-6 ms-auto text-end"},ot=["onClick"],et={class:"row bg-light py-4 mb-4 px-4 fs-6 fw-bold"},lt=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-6 text-start"},"總計",-1)),ct={class:"col-lg-3 text-end col-6"},nt={class:"row mb-4 px-4 fs-6 fw-bold align-items-center"},at=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-12 text-start mb-2 mb-lg-0"},"優惠券",-1)),dt={class:"col-lg-3 col-12 d-flex align-items-center justify-content-end mb-2"},it={key:0,class:"text-end"},rt={class:"row mb-4 pb-4 px-4 fs-6 fw-bold border-bottom"},_t=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-6 text-start"},"折扣",-1)),pt={class:"col-lg-3 text-end col-6"},ut={class:"row mb-4 pb-4 px-4 fs-6 fw-bold"},ht=l(()=>t("div",{class:"offset-lg-8 col-lg-1 col-6 text-start"},"總計",-1)),ft={class:"col-lg-3 text-end col-6 fs-5"},gt={key:1,class:"text-center fw-bold"},mt=l(()=>t("p",{class:"mb-5 fs-lg-3 fs-4"},[d("購物車目前沒有商品"),t("br"),d("為自己創造閱讀時光吧")],-1)),bt=l(()=>t("div",{class:"text-center px-5"},[t("img",{src:q,alt:"",class:"img-fluid"})],-1)),vt=[mt,bt],yt={key:2,class:"row justify-content-between py-5"},Ct={class:"col-lg-4 col-12"},wt=l(()=>t("span",{class:"btn-arrow btn-arrow-left me-2"},null,-1)),xt={class:"col-lg-4 col-12"},kt=l(()=>t("span",{class:"btn-arrow btn-arrow-right ms-2"},null,-1)),Lt={key:3,class:"row justify-content-between py-5"},$t={class:"col-lg-4 mx-auto"},Vt=l(()=>t("span",{class:"me-2"},null,-1));function jt(s,e,f,Nt,g,m){const p=b("font-awesome-icon"),u=b("RouterLink");return c(),n("div",U,[t("div",R,[T,s.cartLength!==0?(c(),n("a",{key:0,href:"#",class:"btn btn-outline-secondary",onClick:e[0]||(e[0]=_((...o)=>s.deleteAllCart&&s.deleteAllCart(...o),["prevent"]))},"清空購物車")):v("",!0)]),s.cartLength!==0?(c(),n("ul",D,[E,(c(!0),n(j,null,N(s.cartList.carts,o=>(c(),n("li",F,[t("div",z,[t("img",{src:o.product.imageUrl,alt:"",class:"img-fluid"},null,8,G)]),t("ul",H,[t("li",J,a(o.product.title),1),t("li",K,[d(" $"+a(o.product.price)+" ",1),t("span",O," $"+a(o.product.origin_price),1)]),t("li",P,[t("div",Q,[t("button",{onClick:r=>s.editCart(o,!1),class:B(["btn pe-3 py-3 border-0",{"disabled opacity-25":o.qty<=1}])},[i(p,{icon:["fas","minus"]})],10,W),y(t("input",{class:"form-control text-center",type:"number",min:"1","onUpdate:modelValue":r=>o.qty=r,onBlur:_(r=>s.changeCartNum(o),["prevent"]),style:{width:"70px"}},null,40,X),[[C,o.qty]]),t("button",{onClick:r=>s.editCart(o,!0),class:"btn ps-3 py-3 border-0"},[i(p,{icon:["fas","plus"]})],8,Y)])]),t("li",Z,[tt,d(" $"+a(o.total),1)]),t("li",st,[t("a",{href:"#",class:"btn btn-outline-gray text-nowrap",onClick:_(r=>s.deleteCart(o.id),["prevent"])},[i(p,{icon:["fas","xmark"],class:"me-2"}),d("移除")],8,ot)])])]))),256)),t("li",null,[t("div",et,[lt,t("div",ct,"$"+a(s.cartList.total),1)]),t("div",nt,[at,t("div",dt,[y(t("input",{type:"text",placeholder:"填入優惠券",class:"form-control px-2 me-2","onUpdate:modelValue":e[1]||(e[1]=o=>g.couponCode=o)},null,512),[[C,g.couponCode]]),t("button",{type:"button",class:"btn btn-secondary text-nowrap",onClick:e[2]||(e[2]=_((...o)=>m.checkCoupon&&m.checkCoupon(...o),["prevent"]))}," 套用 ")]),this.hasCoupon?(c(),n("p",it,"已套用優惠券："+a(this.couponCode),1)):v("",!0)]),t("div",rt,[_t,t("div",pt,"- "+a(s.saveMoney),1)]),t("div",ut,[ht,t("div",ft,"$"+a(s.cartList.final_total),1)])])])):(c(),n("div",gt,vt)),s.cartLength?(c(),n("div",yt,[t("div",Ct,[i(u,{to:{name:"products"},class:"btn btn-outline-secondary rounded-0 w-100 py-3 mb-3 mb-lg-0"},{default:h(()=>[wt,d("繼續逛逛 ")]),_:1})]),t("div",xt,[i(u,{to:{name:"pay"},class:"btn btn-secondary rounded-0 w-100 py-3"},{default:h(()=>[d(" 前往結帳"),kt]),_:1})])])):(c(),n("div",Lt,[t("div",$t,[i(u,{to:{name:"products"},class:"btn btn-secondary rounded-0 w-100 py-3 mb-3 mb-lg-0"},{default:h(()=>[Vt,d("繼續逛逛 ")]),_:1})])]))])}const It=L(I,[["render",jt],["__scopeId","data-v-c5df737e"]]);export{It as default};
