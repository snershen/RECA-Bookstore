import{s as k,u as C,_ as T,o,c as n,a as t,F as d,e as p,n as H,t as l,T as M,r as a,f as i,h as r,y as g,i as S,p as F,j as I}from"./index-c2379942.js";import{u}from"./product-1625754c.js";import{a as $}from"./article-3b7da155.js";import{a as R}from"./order-f5e86588.js";import{u as N}from"./apis-981045b7.js";import{P as O}from"./ProductCard-878b2f6d.js";import{A as U}from"./ArticleCard-ad815903.js";import{L as D}from"./Loading-ea6812b5.js";import{B as E}from"./BtnMore-c4c9bcbe.js";import{S as G,a as J}from"./swiper-vue-0bf80f91.js";import"./sweetalert2.all-03d2c133.js";import"./timeFormat-77515bb4.js";import"./order-ae492693.js";import"./cart-f6162fd0.js";const Q={computed:{...k(u,["productList","categoryList","selectedCategory"])},methods:{...C(u,["getProducts","filterProduct","getProductAll","sortProduct","sortTimeLower"]),directProductPage(){this.$router.push("/products"),this.searchString=""},async handleFilter(s){await this.filterProduct(s),await this.sortTimeLower()}},async created(){await this.getProducts(),await this.filterProduct(this.categoryList[0]),await this.sortTimeLower()}},q={class:"nav-wrapper"},K={class:"nav nav-pills mb-3 flex-nowrap text-nowrap overflow-x-scroll",id:"pills-tab",role:"tablist"},W=["onClick"];function X(s,c,b,L,y,v){return o(),n("div",q,[t("ul",K,[(o(!0),n(d,null,p(s.categoryList,f=>(o(),n("li",{class:"nav-item",role:"presentation",key:f},[t("button",{class:H(["nav-link",{active:s.selectedCategory===f}]),id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true",onClick:_=>v.handleFilter(f)},l(f),11,W)]))),128))])])}const Y=T(Q,[["render",X],["__scopeId","data-v-d2bf5c9a"]]);const Z={data(){return{rankList:[],indexLoading:!1,bannerSwiper:{spaceBetween:60,centeredSlides:!0,breakpoints:{576:{slidesPerView:1},768:{slidesPerView:3},1024:{slidesPerView:5}}},todaySwiper:{slidesPerView:1,spaceBetween:20,navigation:!0,loop:!0,breakpoints:{576:{slidesPerView:1},1024:{slidesPerView:6},1300:{slidesPerView:6}}},publishSwiper:{slidesPerView:1,spaceBetween:18,scrollbar:!0,navigation:!0,loop:!1,breakpoints:{576:{slidesPerView:1},768:{slidesPerView:3},1024:{slidesPerView:4},1400:{slidesPerView:6}}},rankSwiper:{slidesPerView:1,direction:"vertical",watchSlidesProgress:!0,autoScrollOffset:1,observer:!0,observeParents:!0,breakpoints:{576:{slidesPerView:1},1024:{slidesPerView:5}}},rankContentSwiper:{modules:[M],observer:!0,observeParents:!0,slidesPerView:1}}},components:{ProductCard:O,ArticleCard:U,Tabs:Y,BtnMore:E,LoadingComponent:D,Swiper:G,SwiperSlide:J},computed:{filterToday(){return u().productAll.sort((s,c)=>{if(s.time&&c.time)return c.time.localeCompare(s.time)})},filterFeature(){return u().productAll.filter(s=>s.is_feature)},...k(u,["productList","categoryList","filterResult","isLoading"]),...k($,["articleList"]),...k(R,["sortSoldNum"])},methods:{...C($,["getArticles","getRankArticle"]),initializeSwiper(s,c){const b=s,L={observer:!0,observeParents:!0,loop:!0,autoplay:!0,injectStylesUrls:["./custom_swiper.css"],...c};Object.assign(b,L),b.initialize()},getRankArticle(){N("-NrQ8wc--1weD4FTHjHH").then(s=>{const c=s.data.article.content;try{this.rankList=JSON.parse(c),console.log(this.rankList)}catch{this.rankList=this.productList}})}},async mounted(){this.indexLoading=!0,await Promise.all([u().getProducts(),this.getArticles(),this.getRankArticle(),u().getProductAll()]),this.indexLoading=!0,this.initializeSwiper(this.$refs.bannerSwiper,this.bannerSwiper),this.initializeSwiper(this.$refs.todaySwiper,this.todaySwiper),this.initializeSwiper(this.$refs.publishSwiper,this.publishSwiper),this.initializeSwiper(this.$refs.rankSwiper,this.rankSwiper),this.initializeSwiper(this.$refs.rankContentSwiper,this.rankContentSwiper),this.indexLoading=!1}},h=s=>(F("data-v-f26669fa"),s=s(),I(),s),tt={class:"banner py-6 vh-100"},et=h(()=>t("h1",{class:"banner-title text-center fw-bold pt-lg-4"},[S(" 踏上探索之旅"),t("br"),S("尋找屬於自己的命定之書 ")],-1)),st=h(()=>t("p",{class:"banner-subtitle text-center mt-2 fs-4 text-white"},"上萬本書籍等待你的閱讀",-1)),it={class:"container"},ot=["src","alt"],rt={class:"container py-6"},nt={class:"d-flex justify-content-between align-items-center"},at=h(()=>t("h2",{class:"fw-bold fs-2"},"今日熱門",-1)),lt={class:"position-relative"},ct={class:"today-card"},dt={class:"today-card-img mb-3"},_t=["src","alt"],pt={class:"flex-grow-1 w-100"},ut=["innerHTML"],ht={class:"text-gray text-overflow-1 text-center text-lg-start"},ft={class:"today-card-price align-items-center align-items-lg-start justify-content-center justify-content-lg-start flex-lg-column"},wt={class:"d-flex align-items-center"},mt={class:"fw-bold me-2 fs-3"},gt={class:"fs-7 text-gray"},bt=["innerHTML"],yt={class:"bg-primary-light py-6"},vt={class:"container"},xt={class:"d-flex justify-content-between align-items-center mb-4"},kt=h(()=>t("h2",{class:"fw-bold fs-2"},"最新出版",-1)),St={class:"position-relative"},Lt={class:"container py-6"},Pt=h(()=>t("h2",{class:"fw-bold fs-2 mb-5"},"暢銷排行",-1)),$t={class:"row"},Ct={class:"col-lg-3"},Tt={class:"border-bottom py-2 text-truncate"},Vt={class:"me-2 rank-number"},jt={class:"col-lg-9"},At={class:"rank-card d-flex flex-column flex-md-row position-relative text-center text-lg-start"},Bt={class:"rank-card-img mb-3 mb-lg-0"},zt=["src","alt"],Ht={class:"flex-grow-1 w-100"},Mt={class:"fs-4 fs-lg-3 rank-card-title fw-bold text-overflow-2 flex-grow-1 text-center text-md-start"},Ft={class:"rank-card-price align-items-center align-items-md-start justify-content-center justify-content-lg-start flex-column mb-3"},It={class:"text-gray mb-1"},Rt={class:"d-flex align-items-center"},Nt={class:"fw-bold me-2 fs-3"},Ot={class:"fs-7 text-gray"},Ut=["innerHTML"],Dt={class:"bg-primary-light py-5"},Et={class:"container py-5"},Gt={class:"d-flex justify-content-between align-items-center mb-4"},Jt=h(()=>t("h2",{class:"fw-bold fs-2"},"編輯推薦",-1)),Qt={class:"row"},qt={class:"bookstore-bg text-center"},Kt=h(()=>t("h3",{class:"fs-1 fw-bold text-primary mb-4"},"開啟屬於你的閱讀旅程",-1));function Wt(s,c,b,L,y,v){const f=a("LoadingComponent"),_=a("RouterLink"),w=a("swiper-slide"),m=a("swiper-container"),P=a("BtnMore"),V=a("Tabs"),j=a("ProductCard"),A=a("ArticleCard"),B=a("font-awesome-icon"),z=a("router-link");return o(),n(d,null,[i(f,{isLoading:y.indexLoading},null,8,["isLoading"]),t("main",null,[t("section",tt,[et,st,t("div",it,[i(m,{init:"false",ref:"bannerSwiper",class:"container banner-swiper pt-5"},{default:r(()=>[(o(!0),n(d,null,p(v.filterFeature,e=>(o(),g(w,{key:`banner${e.id}`,class:"h-auto d-flex justify-content-center",lazy:"true"},{default:r(()=>[i(_,{to:`/products/${e.id}`},{default:r(()=>[t("img",{src:e.imageUrl,alt:e.title,class:"w-100 h-100 object-fit-contain",loading:"lazy"},null,8,ot)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},512)])]),t("section",rt,[t("div",nt,[at,i(_,{to:{name:"products"}},{default:r(()=>[i(P)]),_:1})]),t("div",lt,[i(m,{init:"false",ref:"todaySwiper",class:"container swiper-today my-5"},{default:r(()=>[(o(!0),n(d,null,p(v.filterToday,e=>(o(),g(w,{key:`today${e.id}`,class:"h-auto"},{default:r(()=>[t("div",ct,[t("div",dt,[t("img",{src:e.imageUrl,alt:e.title,class:"w-100 h-100 object-fit-contain"},null,8,_t)]),t("div",pt,[t("h4",{class:"today-card-title fw-bold text-overflow-2 flex-grow-1 mb-1 text-center text-lg-start",innerHTML:e.title},null,8,ut),t("p",ht,l(e.author),1),t("div",ft,[t("div",wt,[t("p",mt,"$"+l(e.price),1),t("del",gt," $"+l(e.origin_price),1)])]),t("p",{class:"today-card-content text-overflow-4 text-center text-lg-start",innerHTML:e.content},null,8,bt),i(_,{to:`/products/${e.id}`,class:"stretched-link"},null,8,["to"])])])]),_:2},1024))),128))]),_:1},512)])]),t("section",yt,[t("div",vt,[t("div",xt,[kt,i(_,{to:{name:"products"}},{default:r(()=>[i(P)]),_:1})]),i(V),t("div",St,[i(m,{init:"false",ref:"publishSwiper",class:"container px-5"},{default:r(()=>[(o(!0),n(d,null,p(s.filterResult,e=>(o(),g(w,{key:`publish${e.id}`,class:"h-auto d-flex justify-content-center my-5"},{default:r(()=>[i(j,{item:e},null,8,["item"])]),_:2},1024))),128))]),_:1},512)])])]),t("section",Lt,[Pt,t("div",$t,[t("div",Ct,[i(m,{class:"container rank-swiper",init:"false",ref:"rankSwiper","thumbs-swiper":"#rank-thumbs"},{default:r(()=>[(o(!0),n(d,null,p(y.rankList,(e,x)=>(o(),g(w,{key:`publish${x}`,"data-index":x+1},{default:r(()=>[t("div",Tt,[t("span",Vt,l(x+1),1),S(" "+l(e.product.title),1)])]),_:2},1032,["data-index"]))),128))]),_:1},512)]),t("div",jt,[i(m,{init:"false",ref:"rankContentSwiper",class:"container rank-content-swiper",id:"rank-thumbs"},{default:r(()=>[(o(!0),n(d,null,p(y.rankList,(e,x)=>(o(),g(w,null,{default:r(()=>[t("div",At,[t("div",Bt,[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-100 object-fit-contain"},null,8,zt)]),t("div",Ht,[t("h4",Mt,l(e.product.title),1),t("div",Ft,[t("p",It,l(e.product.author),1),t("div",Rt,[t("p",Nt,"$"+l(e.product.price),1),t("del",Ot," $"+l(e.product.origin_price),1)])]),t("p",{class:"today-card-content text-overflow-4",innerHTML:e.product.description},null,8,Ut),i(_,{to:`/products/${e.product.id}`,class:"stretched-link"},null,8,["to"])])])]),_:2},1024))),256))]),_:1},512)])])]),t("section",Dt,[t("div",Et,[t("div",Gt,[Jt,i(_,{to:{name:"articles"}},{default:r(()=>[i(P)]),_:1})]),t("ul",Qt,[(o(!0),n(d,null,p(s.articleList,e=>(o(),n("li",{class:"col-md-4",key:e.id},[i(A,{article:e},null,8,["article"])]))),128))])])]),t("div",qt,[Kt,i(z,{to:{name:"products"},class:"btn btn-outline-light rounded-pill fs-6 px-4 py-2"},{default:r(()=>[S(" 探索書店 "),i(B,{icon:["fas","chevron-right"],class:"ms-2 fa-sm"})]),_:1})])])],64)}const _e=T(Z,[["render",Wt],["__scopeId","data-v-f26669fa"]]);export{_e as default};
