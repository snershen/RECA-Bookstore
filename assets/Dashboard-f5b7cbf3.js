import{b as U,c as Z}from"./apis-981045b7.js";import{d as X,g as H,_ as R,r as m,o as h,c as u,a as t,F as w,e as L,f,h as k,i as N,t as A,w as O,p as tt,j as et}from"./index-c2379942.js";import{r as st,a as at,b as ot,c as nt}from"./selector-engine-2f8e9a5d.js";import{r as it,a as rt,b as ct,c as lt}from"./scrollbar-24367d5f.js";import{t as dt}from"./toastMixin-22fec0f7.js";import"./sweetalert2.all-03d2c133.js";var V={exports:{}};/*!
  * Bootstrap offcanvas.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(s,v){(function(g,a){s.exports=a(st(),at(),ot(),it(),rt(),ct(),nt(),lt())})(X,function(g,a,i,l,d,n,p,E){const P="offcanvas",r=".bs.offcanvas",C=".data-api",q=`load${r}${C}`,B="Escape",x="show",y="showing",S="hiding",M="offcanvas-backdrop",D=".offcanvas.show",F=`show${r}`,K=`shown${r}`,W=`hide${r}`,T=`hidePrevented${r}`,$=`hidden${r}`,Y=`resize${r}`,j=`click${r}${C}`,z=`keydown.dismiss${r}`,G='[data-bs-toggle="offcanvas"]',Q={backdrop:!0,keyboard:!0,scroll:!1},J={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class c extends g{constructor(e,o){super(e,o),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Q}static get DefaultType(){return J}static get NAME(){return P}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||a.trigger(this._element,F,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new E().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(y);const I=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(x),this._element.classList.remove(y),a.trigger(this._element,K,{relatedTarget:e})};this._queueCallback(I,this._element,!0)}hide(){if(!this._isShown||a.trigger(this._element,W).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(S),this._backdrop.hide();const o=()=>{this._element.classList.remove(x,S),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new E().reset(),a.trigger(this._element,$)};this._queueCallback(o,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){a.trigger(this._element,T);return}this.hide()},o=!!this._config.backdrop;return new l({className:M,isVisible:o,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:o?e:null})}_initializeFocusTrap(){return new n({trapElement:this._element})}_addEventListeners(){a.on(this._element,z,e=>{if(e.key===B){if(this._config.keyboard){this.hide();return}a.trigger(this._element,T)}})}static jQueryInterface(e){return this.each(function(){const o=c.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}return a.on(document,j,G,function(_){const e=i.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),p.isDisabled(this))return;a.one(e,$,()=>{p.isVisible(this)&&this.focus()});const o=i.findOne(D);o&&o!==e&&c.getInstance(o).hide(),c.getOrCreateInstance(e).toggle(this)}),a.on(window,q,()=>{for(const _ of i.find(D))c.getOrCreateInstance(_).show()}),a.on(window,Y,()=>{for(const _ of i.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&c.getOrCreateInstance(_).hide()}),d.enableDismissTrigger(c),p.defineJQueryPlugin(c),c})})(V);var _t=V.exports;const ht=H(_t);const ut={data(){return{childrenRoute:[],navbarOffcanvas:null}},mixins:[dt],methods:{logout(){U().then(()=>{this.$router.push({name:"admin-login"}),this.showToast({title:"已登出",icon:"success"}),document.cookie=""}).catch(s=>{console.error(s)})},openCanvas(){this.navbarOffcanvas.show()},hideCanvas(){this.navbarOffcanvas.hide()}},created(){this.childrenRoute=this.$router.options.routes.find(s=>s.path==="/admin").children},mounted(){this.navbarOffcanvas=new ht(this.$refs.offcanvas,{backdrop:"static"})}},b=s=>(tt("data-v-10d6e31b"),s=s(),et(),s),ft={class:"navbar bg-body-tertiary fixed-top d-block d-lg-none"},pt={class:"container-fluid"},mt=b(()=>t("a",{class:"navbar-brand fw-bold",href:"#"},"RECA 書店",-1)),bt=b(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),vt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",ref:"offcanvas"},gt=b(()=>t("div",{class:"offcanvas-header"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),Et={class:"offcanvas-body px-0"},wt={class:"navbar-nav justify-content-end flex-grow-1"},kt={class:"nav-item"},Nt={class:"dashboard position-fixed start-0 top-0 vh-100 d-lg-flex d-none flex-column py-3 pt-4"},At=b(()=>t("a",{class:"navbar-brand fs-4 text-white d-flex align-items-center gap-2",href:"#"},[t("span",{class:"fs-4 fw-bold border-secondary border-4 ps-4"},"RECA書店")],-1)),Ct=b(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),xt={class:"collapse navbar-collapse d-block flex-column justify-content-between w-100",id:"navbarNav",ref:"navbarCollapse"},yt={class:"navbar-nav flex-column w-100"},St={class:"nav-item"};function Dt(s,v,g,a,i,l){const d=m("RouterLink");return h(),u(w,null,[t("nav",ft,[t("div",pt,[mt,bt,t("div",vt,[gt,t("div",Et,[t("ul",wt,[(h(!0),u(w,null,L(i.childrenRoute,n=>(h(),u("li",kt,[f(d,{class:"nav-link rounded-0",to:{name:n.name},onClick:O(l.hideCanvas,["prevent"])},{default:k(()=>[N(A(n.meta.title),1)]),_:2},1032,["to","onClick"])]))),256))])])],512)])]),t("nav",Nt,[At,Ct,t("div",xt,[t("ul",yt,[(h(!0),u(w,null,L(i.childrenRoute,n=>(h(),u("li",St,[f(d,{class:"nav-link",to:{name:n.name}},{default:k(()=>[N(A(n.meta.title),1)]),_:2},1032,["to"])]))),256))]),t("a",{class:"nav-link text-start w-100 mt-5",href:"#",onClick:v[0]||(v[0]=O((...n)=>l.logout&&l.logout(...n),["prevent"]))},"登出")],512)])],64)}const Tt=R(ut,[["render",Dt],["__scopeId","data-v-10d6e31b"]]);const $t={data(){return{username:""}},components:{Navbar:Tt},created(){Z().then(s=>{this.$router.push({name:"admin-products"}),this.username=sessionStorage.getItem("username"),s.data.success||this.$router.push({name:"admin-login"})}).catch(s=>{this.$router.push({name:"admin-login"}),console.error(s)})}},It={class:"d-flex bg-light min-height-100 pt-5 pt-lg-0"},Lt={class:"view-area ms-auto"},Ot={class:"border-bottom py-3 bg-white"},Rt={class:"container d-flex align-items-center justify-content-between"},Vt={class:"d-flex align-items-center"},Pt={class:"container py-4"};function qt(s,v,g,a,i,l){const d=m("Navbar"),n=m("font-awesome-icon"),p=m("RouterLink"),E=m("RouterView");return h(),u("div",It,[f(d,{class:"border-end"}),t("div",Lt,[t("div",Ot,[t("div",Rt,[t("div",Vt,[f(n,{icon:["fas","user"],class:"me-2"}),t("p",null,"Hi, "+A(i.username),1)]),f(p,{to:{name:"index"},target:"_blank"},{default:k(()=>[N("回到前台")]),_:1})])]),t("div",Pt,[f(E)])])])}const zt=R($t,[["render",qt],["__scopeId","data-v-766ecd64"]]);export{zt as default};
