import{z as n}from"./index-0bc740d2.js";import{s as d}from"./apis-9b5d4518.js";import{t as e}from"./timeFormat-77515bb4.js";const p=n("adminOrderStore",{state:()=>({orderList:[],orderAll:[],productSoldNum:{},sortSoldNum:[],pagination:{},isLoading:!1}),actions:{getOrder(o=1){this.isLoading=!0,d(o).then(r=>{this.orderList=r.data.orders,this.pagination=r.data.pagination,e(this.orderList),this.isLoading=!1,this.orderList.forEach(t=>{t.total=Math.round(t.total),e(t,"create_at")})})},async getOrderAll(){console.clear();let o={...this.pagination};this.orderAll=[];let r=o.current_page;for(;o.has_next;)await d(r).then(t=>{o=t.data.pagination,r++;const s=t.data.orders;this.orderAll.push(...s),console.log(this.orderAll)}).catch(t=>console.log(t))},async calcOrderNum(){await this.getOrderAll();const o=this.orderAll.map(t=>Object.keys(t.products));let r=[];o.forEach((t,s)=>{t.forEach(a=>{r.push(this.orderAll[s].products[a])})}),this.productSoldNum=[],r.forEach(t=>{if(this.productSoldNum[t.id])this.productSoldNum[t.id].qty+=t.qty;else{const{id:s,qty:a,product:i}=t,l={id:s,qty:a,product:i};this.productSoldNum[t.id]=l}}),this.sortSoldNum=Object.values(this.productSoldNum).sort((t,s)=>s.qty-t.qty),this.sortSoldNum=this.sortSoldNum.slice(0,10),console.log(this.sortSoldNum)}}});export{p as a};
