import{S as L,a as V}from"./swiper-vue-f08146e1.js";import{P as x}from"./ProductCard-c28e7925.js";import{P as z}from"./ProductCategory-4b65cd36.js";import{u as b,x as w,_ as S,o as r,c as l,a as t,w as d,n as _,k as v,F as y,r as i,e as n,t as u,f as P,g as O,d as N,l as j,p as A,h as E}from"./index-e3e4c989.js";import{p as m}from"./product-defc8536.js";import{B as D}from"./Breadcrumb-32ce5ef6.js";import{c as M}from"./cart-a41ecefe.js";import"./sweetalert2.all-79737a9a.js";import"./apis-75edfbd9.js";const F={data(){return{content:""}},computed:{...b(m,["singleProduct","singleProductId"])},methods:{...w(m,["getSingleProduct"])},async created(){await this.getSingleProduct(this.$route.params.id),this.content=await this.singleProduct.content}},H={class:"nav border-bottom mb-3"},U={key:1,class:"nav-item"},K={key:2,class:"nav-item"},q=["innerHTML"];function G(e,s,c,h,o,f){return r(),l(y,null,[t("ul",H,[e.singleProduct.content?(r(),l("li",{key:0,class:"nav-item",onClick:s[0]||(s[0]=d(p=>o.content=e.singleProduct.content,["prevent"]))},[t("a",{class:_(["nav-link fs-5",{active:o.content===e.singleProduct.content}]),"aria-current":"page",href:"#"},"本書簡介",2)])):v("",!0),e.singleProduct.author_content?(r(),l("li",U,[t("a",{class:_(["nav-link fs-5",{active:o.content===e.singleProduct.author_content}]),href:"#",onClick:s[1]||(s[1]=d(p=>o.content=e.singleProduct.author_content,["prevent"]))},"作者介紹",2)])):v("",!0),e.singleProduct.description?(r(),l("li",K,[t("a",{class:_(["nav-link fs-5",{active:o.content===e.singleProduct.description}]),href:"#",onClick:s[2]||(s[2]=d(p=>o.content=e.singleProduct.description,["prevent"]))},"目錄",2)])):v("",!0)]),t("ul",null,[t("li",{innerHTML:o.content},null,8,q)])],64)}const J=S(F,[["render",G],["__scopeId","data-v-f1c6b871"]]);const Q={data(){return{isSolid:!1,relatedResult:[],relatedSwiper:{slidesPerView:1,spaceBetween:18,navigation:!0,breakpoints:{576:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}}}}},props:["id"],components:{ProductCard:x,ProductTab:J,ProductCategory:z,Breadcrumb:D,Swiper:L,SwiperSlide:V},computed:{...b(m,["singleProduct","productList","alikeProduct","collectList","collectStorage","isSolid","selectedSingle","filterResult"]),icon(){return this.isSolid?["fas","heart"]:["far","heart"]}},methods:{...w(M,["getCart","addCart"]),...w(m,["getSingleProduct","getProducts","filterProduct","showAlikeProduct","getStorage","addOrRemoveCollect"]),initializeIsSolid(){const s=Array.from(this.collectStorage).filter(c=>c.id===this.singleProduct.id);s.length>0&&(this.isSolid=!!s[0].isSolid)},changeCollectIcon(){this.isSolid=!this.isSolid},handleCollectBtn(e){this.changeCollectIcon(),this.addOrRemoveCollect(e,this.isSolid)},initializeSwiper(e,s){const c=e,h={autoplay:!0,injectStylesUrls:["./custom_swiper.css"],...s};Object.assign(c,h),c.initialize()}},async created(){await this.getSingleProduct(this.id);const e=await this.filterProduct(this.singleProduct.category,"related");this.relatedResult=await e.filter(s=>s.id!==this.singleProduct.id),document.title=`${this.singleProduct.title}｜RECA BOOKSTORE`},mounted(){this.getStorage(),setTimeout(()=>{this.initializeIsSolid(),this.initializeSwiper(this.$refs.relatedSwiper,this.relatedSwiper)},500)},watch:{"singleProduct.title":"updateDocumentTitle"}},g=e=>(A("data-v-38c51c65"),e=e(),E(),e),W={class:"container py-5"},X={class:"row"},Y={class:"col-md-3 d-none d-md-block mb-5"},Z={class:"col-md-9 col-12"},tt={class:"row"},et={class:"col-lg-4 mb-3 mb-lg-0 text-center"},st={class:"px-5 mx-5 px-lg-0 mx-lg-0"},ot=["src","alt"],it={class:"col-lg-8 d-flex flex-column justify-content-between"},nt={class:"mb-3 mb-lg-0"},rt={class:"font-sans fw-bold mb-3 mb-lg-5 fs-lg-2 fs-4"},ct={class:"mb-3 row"},lt=g(()=>t("div",{class:"col-1 text-nowrap"},"作者：",-1)),dt={class:"col-6 ms-3"},at={class:"mb-3 row"},ut=g(()=>t("div",{class:"col-1 text-nowrap"},"出版社：",-1)),pt={class:"col-6 ms-3"},_t={class:"mb-2 align-items-center row"},mt=g(()=>t("div",{class:"col-1 text-nowrap"},"價格：",-1)),gt={class:"col-6 ms-3 d-flex align-items-center"},ht={class:"fs-3 fw-bold me-2"},ft={class:"fs-7 text-gray text-decoration-line-through"},vt={class:"row"},Pt={class:"col-3 col-lg-2 order-1 order-lg-0"},wt={class:"fa-lg text-white"},bt={class:"col-lg-5 col-9 order-1 order-lg-0"},St={class:"col-lg-5"},yt={class:"col-12 py-5"},Ct=g(()=>t("h3",{class:"font-sans fs-4 ms-2 mb-3 fw-bold"},"更多相關商品",-1)),kt={class:"position-relative"};function $t(e,s,c,h,o,f){const p=i("Breadcrumb"),C=i("ProductCategory"),k=i("font-awesome-icon"),$=i("RouterLink"),B=i("ProductTab"),I=i("ProductCard"),R=i("swiper-slide"),T=i("swiper-container");return r(),l("div",W,[n(p,{breadConfig:{path:"products",subNav:"書籍類別",title:"書籍介紹"}}),t("div",X,[t("div",Y,[n(C)]),t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[t("img",{src:e.singleProduct.imageUrl,alt:e.singleProduct,class:"img-fluid"},null,8,ot)])]),t("div",it,[t("div",nt,[t("h3",rt,u(e.singleProduct.title),1),t("ul",null,[t("li",ct,[lt,t("div",dt,u(e.singleProduct.author),1)]),t("li",at,[ut,t("div",pt,u(e.singleProduct.publish),1)]),t("li",_t,[mt,t("div",gt,[t("p",ht,"$"+u(e.singleProduct.price),1),t("p",ft," $"+u(e.singleProduct.origin_price),1)])])])]),t("div",vt,[t("div",Pt,[t("a",{href:"#",class:_(["btn btn-gray w-100 py-3 rounded-2 border-0",{"bg-danger ":o.isSolid}]),onClick:s[0]||(s[0]=d(a=>f.handleCollectBtn(e.singleProduct),["prevent"]))},[t("span",wt,[n(k,{icon:f.icon},null,8,["icon"])])],2)]),t("div",bt,[t("a",{href:"#",class:"btn btn-gray text-white w-100 py-3 rounded-0 mb-lg-0 mb-0 rounded-2",onClick:s[1]||(s[1]=d(a=>e.addCart(e.singleProduct.id),["prevent"]))},"加入購物車")]),t("div",St,[n($,{to:{name:"cart"},class:"btn btn-primary text-white w-100 py-3 rounded-0 mb-lg-0 mb-2 rounded-2",onClick:s[2]||(s[2]=d(a=>e.addCart(e.singleProduct.id),["prevent"]))},{default:P(()=>[O("立即購買")]),_:1})])])]),t("div",yt,[n(B)]),t("div",null,[Ct,t("div",kt,[n(T,{init:"false",ref:"relatedSwiper",class:"container px-5"},{default:P(()=>[(r(!0),l(y,null,N(o.relatedResult,a=>(r(),j(R,{key:a.id,class:"h-auto d-flex justify-content-center my-3 px-2"},{default:P(()=>[n(I,{item:a},null,8,["item"])]),_:2},1024))),128))]),_:1},512)])])])])])])}const Nt=S(Q,[["render",$t],["__scopeId","data-v-38c51c65"]]);export{Nt as default};
