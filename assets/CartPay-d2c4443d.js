import{v as g}from"./apis-9024af3e.js";import{_ as w,Y as v,Z as y,$ as x,s as V,u as D,r as m,o as u,c as _,a as e,F as k,e as C,t as c,f as d,h as F,b as E,v as P,w as p,i as h,p as M,j as N}from"./index-ad467eb3.js";import{t as I}from"./toastMixin-f63d0cd0.js";import{c as b}from"./cart-22013adf.js";import"./sweetalert2.all-dc3da75e.js";const S={data(){return{couponCode:"",orderData:{data:{user:{}}}}},components:{Form:v,Field:y,ErrorMessage:x},mixins:[I],computed:{...V(b,["saveMoney","cartList"])},methods:{...D(b,["getCart"]),directCartPage(){this.$router.push({name:"cart"})},sendOrder(){g(this.orderData).then(r=>{const t=r.data.orderId;this.$router.push(`/orders/${t}`)}).catch(r=>{console.error(r)})},async submitForm(){(await this.$refs.form.validate()).valid?this.sendOrder():this.showToast({icon:"info",title:"請填入正確的訂購資料"})}},created(){this.getCart(),this.cartList.length===0&&this.$router.push("/cart")}},o=r=>(M("data-v-adb2e68d"),r=r(),N(),r),q={class:"container py-5"},A={class:"row"},L={class:"offset-1 col-10"},U=o(()=>e("h1",{class:"fw-bold mb-4"},"訂單明細",-1)),B={class:"list-unstyled w-100 text-center mb-5"},O=o(()=>e("tr",{class:"py-3"},[e("td",{width:"60%",class:"text-start"},"品名"),e("td",{width:"20%"},"數量"),e("td",{width:"20%",class:"text-end"},"小計")],-1)),T={class:"border-bottom"},j={class:"text-start"},Y={class:"text-end"},Z={class:"fw-bold"},z=o(()=>e("td",{colspan:"1",class:"text-start"},"總計",-1)),G={colspan:"2",class:"text-end"},H=o(()=>e("h2",{class:"fw-bold mb-3"},"訂購資訊",-1)),J={class:"row"},K={class:"col-lg-3 mb-4"},Q=o(()=>e("label",{for:"orderName",class:"form-label"},"姓名",-1)),R={class:"col-lg-3 mb-3"},W=o(()=>e("label",{for:"orderPhone",class:"form-label"},"聯絡電話",-1)),X=o(()=>e("li",null,[e("div",{class:"w-100 d-none d-md-block"})],-1)),$={class:"col-lg-6 mb-4"},ee=o(()=>e("label",{for:"orderEmail",class:"form-label"},"Email",-1)),se=o(()=>e("li",null,[e("div",{class:"w-100 d-none d-md-block"})],-1)),te={class:"col-lg-6 mb-4"},oe=o(()=>e("label",{for:"orderAddress",class:"form-label"},"寄送地址",-1)),re=o(()=>e("li",null,[e("div",{class:"w-100 d-none d-md-block"})],-1)),ae={class:"col-lg-6"},de=o(()=>e("label",{for:"orderMessage",class:"form-label"},"備註",-1)),le={class:"row justify-content-between py-5"},ne={class:"col-lg-4 col-6"},ie=o(()=>e("span",{class:"btn-arrow btn-arrow-left me-2"},null,-1)),ce={class:"col-lg-4 col-6"},me=o(()=>e("span",{class:"btn-arrow btn-arrow-right ms-2"},null,-1));function ue(r,t,_e,pe,a,l){const n=m("Field"),i=m("ErrorMessage"),f=m("Form");return u(),_("div",q,[e("div",A,[e("div",L,[U,e("table",B,[O,(u(!0),_(k,null,C(r.cartList.carts,s=>(u(),_("tr",T,[e("td",j,c(s.product.title),1),e("td",null,c(s.qty),1),e("td",Y,c(s.final_total),1)]))),256)),e("tr",Z,[z,e("td",G,"$"+c(r.cartList.final_total),1)])]),e("section",null,[H,d(f,{ref:"form"},{default:F(()=>[e("ul",J,[e("li",K,[Q,d(n,{type:"text",name:"orderName",class:"form-control rounded-0 border-dark",placeholder:"請輸入 姓名",id:"orderName",modelValue:a.orderData.data.user.name,"onUpdate:modelValue":t[0]||(t[0]=s=>a.orderData.data.user.name=s),rules:"required"},null,8,["modelValue"]),d(i,{name:"orderName",class:"text-danger fs-6"})]),e("li",R,[W,d(n,{type:"tel",name:"orderPhone",class:"form-control rounded-0 border-dark",id:"orderPhone",placeholder:"請輸入 電話",modelValue:a.orderData.data.user.tel,"onUpdate:modelValue":t[1]||(t[1]=s=>a.orderData.data.user.tel=s),rules:"required|phone:10"},null,8,["modelValue"]),d(i,{name:"orderPhone",class:"text-danger fs-6"})]),X,e("li",$,[ee,d(n,{type:"email",class:"form-control rounded-0 border-dark",name:"orderEmail",id:"orderEmail",placeholder:"請輸入 Email",modelValue:a.orderData.data.user.email,"onUpdate:modelValue":t[2]||(t[2]=s=>a.orderData.data.user.email=s),rules:"required|email"},null,8,["modelValue"]),d(i,{name:"orderEmail",class:"text-danger fs-6"})]),se,e("li",te,[oe,d(n,{type:"text",class:"form-control rounded-0 border-dark",name:"orderAddress",id:"orderAddress",placeholder:"請寫入寄送地址",modelValue:a.orderData.data.user.address,"onUpdate:modelValue":t[3]||(t[3]=s=>a.orderData.data.user.address=s),rules:"required"},null,8,["modelValue"]),d(i,{name:"orderAddress",class:"text-danger fs-6"})]),re,e("li",ae,[de,E(e("textarea",{class:"form-control rounded-0 border-dark",type:"text",id:"orderMessage",placeholder:"訂單更多說明",rows:"5","onUpdate:modelValue":t[4]||(t[4]=s=>a.orderData.data.message=s)},null,512),[[P,a.orderData.data.message]])])]),e("div",le,[e("div",ne,[e("a",{href:"#",class:"btn btn-outline-secondary rounded-0 w-100 py-3 mb-3 mb-lg-0",onClick:t[5]||(t[5]=p((...s)=>l.directCartPage&&l.directCartPage(...s),["prevent"]))},[ie,h("上一步 ")])]),e("div",ce,[e("button",{type:"submit",class:"btn btn-secondary rounded-0 w-100 py-3",onClick:t[6]||(t[6]=p((...s)=>l.submitForm&&l.submitForm(...s),["prevent"]))},[h(" 送出訂單"),me])])])]),_:1},512)])])])])}const ve=w(S,[["render",ue],["__scopeId","data-v-adb2e68d"]]);export{ve as default};
